<!-- #
# Apache Software License 2.0
#
# Copyright (c) 2022-2023, Jan Bessai, Anne Meyer, Hadi Kutabi, Daniel Scholtyssek
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#  -->

<!doctype html>

<head>
  <meta charset="utf-8">
  <title>Repository Visualizer</title>
  <script src="js_lib/d3.js"></script>
  <script src="js_lib/dagre-d3.js"></script>
  <link rel="stylesheet" type="text/css" href="style.css?v=123456"> <!-- ?v=123456 to stop caching -->

  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">

  <script src="js_lib/cytoscape.umd.js"></script>
  <script src="js_lib/dagre.js"></script>
  <script src="js_lib/cytoscape-dagre.js"></script>
  <script src="style.js"></script>
  <script src="helper.js"></script>
  <script src="static-cytoscape.js"></script>


  <script>

    window.addEventListener('DOMContentLoaded', function () {
        createCytoscapeStaticGraph();
    });
  </script>

</head>

<body>
  <h1>CLS-Luigi Repository Visualization</h1>

  <h2>
    Repository Overview
  </h2>

  <div class="static pipeline">
    <div class='legend'  style="top:30px; width: 500px; height: 180px;">
      <div class='legend-title'>Component Type</div>
      <div class='legend-scale'>
        <ul class='legend-labels'>
          <li><span class="abstract-color"></span>Abstract Task</li>
          <li><span class="non-abstract-color"></span>Non-Abstract Task</li>
          <li><span class="indexed-color"></span>Non-Abstract Task with Config Index</li>
          <li><span class="luigi-task-color"></span>Luigi Task</li>
        </ul>
      </div>
    </div>
    <div id="cy" style="width: 98%; height: 88%; margin:40px;"></div>
    <div id="subgraph-container" style="display: none; width: 100%; height: 100vh;"></div>
  </div>

  <h2>
    Combined Pipelines Overview
  </h2>



  <div class = "dynamic pipeline">
        <div class='legend', style="height:225px; left:-5px; top:0px; margin: 40px;">
        <div class='legend-title'> Task Status</div>
        <div class='legend-scale'>
          <ul class='legend-labels'>
            <li><span class="FAILED"></span>Failed</li>
            <li><span class="PENDING"></span>Pending</li>
            <li><span class="DONE"></span>Done</li>
            <li><span class="RUNNING"></span>Running</li>
            <li><span class="NOTASSIGNED"></span>No Status Assigned Yet</li>
          </ul>
        </div>
      </div>
    <div class="total-tasks", id = "dynamic_p", style="width: 400px;">

    </div>
    <svg class = "dynamic-pipeline">
    </svg>
  </div>

  <h2>
    Single Pipeline Overview
  </h2>

  <div class = "single pipeline">
  <div class='legend', style="height:225px; left:-5px; top:0px; margin: 40px;">
      <div class='legend-title'> Task Status</div>
      <div class='legend-scale'>
        <ul class='legend-labels'>
          <li><span class="FAILED"></span>Failed</li>
          <li><span class="PENDING"></span>Pending</li>
          <li><span class="DONE"></span>Done</li>
          <li><span class="RUNNING"></span>Running</li>
          <li><span class="NOTASSIGNED"></span>No Status Assigned Yet</li>
        </ul>
      </div>
    </div>



    <div class='legend', style="height:226px; left:375px; top:-269px; margin: 40px; width: 270px; padding-inline: 10px;">
      <div class='legend-title', style="text-align: left"> Select a pipeline to show</div>
      <div class = 'dropdown' style="margin-top: 30px; margin-left: 57px">
        <select id="selectButton", style="width: 130px; height: 33px;"></select>
      </div>
    </div>
    <div class='legend', id ="single_p_n_tasks",  style="height:226px; left:692px; top:-542px; margin: 40px; width: 400px; padding-inline: 10px;">
    </div>
    <svg class="single-pipeline"></svg>
  </div>
  <script src="app.js"></script>
</body>
</html>
